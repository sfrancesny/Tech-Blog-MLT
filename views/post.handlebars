<!-- views/post.handlebars -->

<section class="post-section">
  <div class="container">
    <article class="post">
      <header class="post-header">
        <h1>{{post.title}}</h1>
        <div class="post-meta">
          <span class="post-author">by {{post.user.username}}</span>
          <time datetime="{{post.createdAt}}">{{formatDate post.createdAt}}</time>
        </div>
      </header>

      <div class="post-content">
        <p>{{post.content}}</p>
      </div>

      <footer class="post-footer">
        {{#if loggedIn}}
          <form class="comment-form">
            <label for="comment">Leave a comment:</label>
            <textarea id="comment" name="comment" required></textarea>
            <button type="submit">Submit Comment</button>
          </form>
        {{else}}
          <p>You need to <a href="/login">log in</a> to leave a comment.</p>
        {{/if}}
      </footer>
    </article>

    <section class="comments-section">
      <h2>Comments</h2>
      {{#if post.comments.length}}
        <ul class="comments-list">
          {{#each post.comments as |comment|}}
            <li class="comment">
              <p>{{comment.content}}</p>
              <div class="comment-meta">
                <span class="comment-author">by {{comment.user.username}}</span>
                <time datetime="{{comment.createdAt}}">{{formatDate comment.createdAt}}</time>
              </div>
            </li>
          {{/each}}
        </ul>
      {{else}}
        <p>No comments yet.</p>
      {{/if}}
    </section>
  </div>
</section>
